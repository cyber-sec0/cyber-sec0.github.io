<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Website Monitor Settings</title>
		<link rel="stylesheet" href="styles.css" />
	</head>
	<body>
		<div class="container">
			<h2>Website Monitor</h2>
			<h4>GLOBAL SETTINGS</h4>
			<div class="form-group">
				<div class="interval-group">
					<div>
						<label for="checkIntervalHoursInput" class="label-with-icon"><span>Hours</span><span class="help-icon" title="Set the hours to wait between checks.">?</span></label
						><input type="number" id="checkIntervalHoursInput" min="0" value="0" />
					</div>
					<div>
						<label for="checkIntervalMinutesInput" class="label-with-icon"><span>Minutes</span><span class="help-icon" title="Set the minutes to wait between checks. Minimum total is 1 minute.">?</span></label
						><input type="number" id="checkIntervalMinutesInput" min="0" value="1" />
					</div>
				</div>
				<button id="saveSettingsBtn">Save Global Settings</button>
			</div>
			<div class="header-with-button">
				<h3>ADD</h3>
				<button id="toggleFormBtn" title="Add new site">+</button>
			</div>
			<div id="formContainer" class="form-group hidden">
				<h3 id="formTitle">Add New Site or Endpoint</h3>
				<label class="label-with-icon"><span>Name</span><span class="help-icon" title="A nickname for this entry, for your reference.">?</span></label
				><input type="text" id="nameInput" placeholder="Ex: Movies 2024" /> <label class="label-with-icon"><span>Endpoint URL</span><span class="help-icon" title="The specific URL the script will request to check for changes.">?</span></label
				><input type="text" id="urlInput" placeholder="URL to check for changes" /> <label class="label-with-icon"><span>Website to Open (Optional)</span><span class="help-icon" title="If a change is detected, this URL will be opened. If blank, the Endpoint URL is used.">?</span></label
				><input type="text" id="websiteInput" placeholder="URL to open when a change occurs" />
				<label class="label-with-icon"><span>Comparison Method</span><span class="help-icon" title="Choose how the script should detect changes.">?</span></label>
				<select id="comparisonMethodInput">
					<option value="text">Text Content (ignores HTML tags)</option>
					<option value="order">Element Order (for lists)</option>
					<option value="new_items">New Items Only (in a list)</option>
				</select>
				<div id="listFields" class="hidden">
					<label class="label-with-icon"><span>CSS Selector for List Items</span><span class="help-icon" title="A CSS selector to find all items in a list (e.g., 'li.post'). Required for list-based comparisons.">?</span></label
					><input type="text" id="selectorInput" placeholder="Ex: .post or li[data-script-id]" /> <label class="label-with-icon"><span>Unique ID Attribute</span><span class="help-icon" title="An attribute on each list item that holds a unique ID (e.g., 'id' or 'data-id'). Required for list-based comparisons.">?</span></label
					><input type="text" id="idAttributeInput" placeholder="Ex: data-script-id or id" />
				</div>
				<hr />
				<div class="label-with-icon"><input type="checkbox" id="tokenEnabledCheckbox" style="width: auto; margin-right: 8px" /> <label for="tokenEnabledCheckbox">Enable Dynamic Token Fetching</label> <span class="help-icon" title="Check this for sites that use temporary security tokens (nonces) that expire.">?</span></div>
				<div id="tokenFields" class="hidden">
					<h4>Dynamic Token Settings</h4>
					<label class="label-with-icon"><span>Token Fetch URL</span><span class="help-icon" title="The URL of the page where the script can find a fresh token.">?</span></label
					><input type="text" id="tokenUrlInput" placeholder="Page containing the token" /> <label class="label-with-icon"><span>Token CSS Selector</span><span class="help-icon" title="A CSS selector to find the element containing the token.">?</span></label
					><input type="text" id="tokenSelectorInput" placeholder="Ex: input[name='_token'] or meta[name='csrf-token']" /> <label class="label-with-icon"><span>Token Attribute (Optional)</span><span class="help-icon" title="If the token is in an attribute (like 'value' or 'content'), specify it here. Leave blank if the token is in the element's text.">?</span></label
					><input type="text" id="tokenAttributeInput" placeholder="Ex: value or content" /> <label class="label-with-icon"><span>Token RegEx (Optional)</span><span class="help-icon" title="A regular expression to extract the token from the element's text. Use parentheses to capture the token.">?</span></label
					><input type="text" id="tokenRegExInput" placeholder="Ex: token:([a-zA-Z0-9]+)" /> <label class="label-with-icon"><span>Token Placeholder</span><span class="help-icon" title="The placeholder in your headers/body that will be replaced with the actual token.">?</span></label
					><input type="text" id="tokenPlaceholderInput" placeholder="Ex: %%NONCE%% or {{TOKEN}}" />
				</div>
				<hr />
				<details>
					<summary>Advanced Settings</summary>
					<label class="label-with-icon"><span>CSS Selector (Optional)</span><span class="help-icon" title="A CSS selector to monitor only a specific part of the page. Leave blank to monitor the entire page.">?</span></label
					><input type="text" id="advancedSelectorInput" placeholder="Ex: .content or #main" /> <label class="label-with-icon"><span>Custom Headers (Optional)</span><span class="help-icon" title="Custom HTTP headers in JSON format. Use for authentication or special requirements.">?</span></label
					><textarea id="headerInput" placeholder='{"Authorization": "Bearer token", "X-Custom": "value"}'></textarea> <label class="label-with-icon"><span>POST Body (Optional)</span><span class="help-icon" title="Request body for POST requests. Leave blank for GET requests.">?</span></label
					><textarea id="bodyInput" placeholder='{"key": "value"} or form data'></textarea>
				</details>
				<div class="button-group">
					<button id="addBtn">Add Entry</button>
					<button id="updateBtn" class="hidden">Update Entry</button>
					<button id="cancelBtn" class="hidden">Cancel</button>
				</div>
			</div>
			<h3>CURRENT ENTRIES</h3>
			<ul id="entryList"></ul>
		</div>
		<script src="script.js"></script>
	</body>
</html>
